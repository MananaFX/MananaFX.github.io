import{_ as j,d as D,a as M,b as N,g as V,u as T,k as z,c as K,r as q,i as L,e as r,f as n,h as i,w as l,t as k,n as _,j as h,l as O,s as W,m as H,o as P,p as u,q as d,F as G,v as X,x as w,y as m,z as J,A as Y,B as Z}from"./index.300a62bc.js";var b="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCABrAGQDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD1uiiisjUKKKKACiiigAooooAKKKKACiiigAooooAKKKjTzZ7swoVUbC+5ugABJP6Ujqw+HniZOEN9ySip7W1e4wAMnvV+30pZrj7OrebPkBo4gXZc/wB4LnaPc0HPyu9jKClugzUi27t/Ca6Y6PDpt4LVojcXQjE0gLBIoIycB5ZDwoODjqTg4Brds7O3WNfLsZbtyM7oNPuHj/ByFVh7ip5i1TbPO2t3Tqppmw+lenT6DfTCCSTSbVNOm63AmaGaI8/eikQcZ9Gz6A1jL4ZlbVJbWLS7ycRnDTMFiiz6Asct9VBHvRzDdNnFbT6UnSvQ9U8IG1tfMbSrhiBlvs0iyMP+AnGfwrj5bGG6tzc2UwniU4dcFXjOM4ZTyp+oppkyg0ZlFDKVODRVGYUUUUASpGWqaPTnlkV13BsYO3uPQ1ZsbYSNuYhUUbixOAAO5rufCfha91WzW9YQadZuN0QmjLyunZzyAmewIJwRnHSobOmlzxleDszxn4j+KtR8I2NsLCBRG83lzzvuGSFDGIFSCPlIJIIIDDBz09S+CfiKw+KmjypNYXWjvYhQLOxleC0YHqylCGYk9VckDjHc1t+JvhroXjjSf+ETnnle7t3OqNeQxYETPIwUNzj5hvAXPRM8YFd1oGh6Z4J8Ppa2cSwWtrFlmA5IAySa525OV+h0xgoqz3J5LfToZraK5NuJi/mQrMV3Fl43KD3G7qOma0SBXlOtWmk61Na3WvXkNhf6qVW3tjMiB/l+WPy2yszgHklWPYYHFM1CTT/hvocl1qHiSTR9IEiqxitra3UsxAGfLhByeORip54nQqNTex6TqmiWmtC3W7j81YJPORckDdtKgn6bjj3wa8F+NH7QWr+CvE39laLpcai3I828v4mKzH+6gBHy9s557Y6n2XTLy6tb0/vDdWUx3He+XiY91J6ofTqO2RwLE1h4f8d2KSz2lrqcGRgyIDjgEdeRkEEeoIPQ0X5l7rJlFwdpIt6LdJrmh6fqHlhBd28c+3rjcobH61yHifwPDDeR39jEIgibXjij/gzllwoywILEA9GAxgFs7UevS6Tff2RNYx2Xkxb7UQsZEmgUhSV4BVlJQMpHG9cE5414Lpb9QVDDPXcpGKpSs7EuHNHmPD7rRVmk3NDNarI2EadNqMemAwyuT2BOTWNqGly2MhDrjFe9X/g61maaezVLS6mBEw2ZhuAeolTo2f73DD1xkHzLWNNkjiuraaNv3fzwl23Mq7irRk/xbGGA38Ssh65NbKRxTp2OFop0i7XIorU5jXi2HS7vdyhjIf2Q8MfoFzXt2m6fPqGi2YkleC4WNVlBH8YGCR6jOee4rxTQbjybyM9QTjFex/D/AFhNS0G2O6MNsDrDH/yzjbJjU/8AAcfkawqK6szuoScXdEulaBeaP4mvblRFcWN9bwrJIzkSxSR7x0xhlYMvcEEHg54m8UTYs4bNmCRX0v2WWQ/woUcn8Tt2j3YVvM3FVZlSZTHIiuh6qwyKzOg8t8UfDe28ZapoF5qsk0NxoN6l7ZtasFDMpBKuCDlTtXpg8dak8R+E4viRouoaJ4o0pI9MaVGiNveFmk2tkNwqlOg4yeprutU0OS+mE1veTWcoGDswyMPdWBH4jB96gt9B1TzU8y9s3jz8221dDj2/eHmsXB9DuWIi90ZljBNbpFAqJHaxjylUE5CgYBz+FU/hjdQaXEulJ50945CXXygLFJBBFAzg55RvLTGOdxI9dvWN4XRrxZjf3YjVg32ZTGIzjsTt3Y/4FV6y0u000MLa3jg3FmbavJyzOef95mP4mriuW9zCvUVVppbEeoabBeXFvPLHult9xjbOMbhg/hj+npSQqIRhR0qz5m9enPSvEfEem/Fy8+JVrPpixWuheaqFkvE8hIt2GLIRlmK8/d6nA6U6ajiINwla60ZxVqsqCTUXLVaL8z2+eSRLWR4YvOlVSVj3Bdx9M9q8r8VXSWmsPbhJpHkiee68xlZ4DK0YUHBxgeWc46ArXpV3PNpWhTTystzcW9szs33BIyrk/wC6CR+Ga8uvZraOMRyuG1Bpc3Y6NOi5ZJJcY6q68dNxwBgYrSA6hwd9bmK6kX3opdQuPPvJH9TRXRqcOgumzeXOv1r0T4c3y2N8bRF3ukawyRqQCIgzNFKAcZUByjY5BQcYry9GKtkVqWupRs0JmVi8RJjljdo5Ez12spBGe/PPepkrlQlys91vLvVIdSItHs7q2dQfIuGaF4zjs6htw9ioIyfm6AX5luVt1lWBZpOC8SSY7c7SQATn1x+FcV4fv/t2nWl0JZbg7XjZnwWzuGAcAdh1rTuvFUehxmW4E0yR4aSO3TzHVc8ttHJA64GTxwDXIpPm5bHrumvZ+0udFa363EqxfZbqJiMkyREKPx6flVxRtNZsHijSriK0lS/gaK7Xdbzbx5cvsrdCfYHNP1TX7DRWgS7ukhluG2Qw8tJK3oqDJb8BxWhhcvJdQSXEkCzRtPGAzxKwLKD0JHUZxUN5qVrYojz3EcSyOIkLMBuc9FHqT6dTXNa/qHh3VNUjsrqwttX1GLsYFkNup7s5+5n0zk9gat/8Sm40mTTn0u2/s9wVe18lfKPPOVxjrUtqO5cYSmm4l/R9cs9caYWnnsIcbzLbyRDJzwC6jJ45A6cZ61ooxVmyMDPFcN4S8Q6VDfTWejafujLBZlS4AmtyM58yOVgwX0Kbgc5AxyV8c+MrGO2n0qGP+07yZCjW8PzKgPeRuiL9Tk9gaTg3JNO1jLmSV2dBrWv20MM/zRz28PyXKlS2cg4RRjDMTgFfQ14/4u1uSaZ1b5J5nM0yA52kgAL+CgD8KvHxtBpelraQw77iKLyo2UKsUXGP3aAAADtXDzTNPI0jkszHJJrojE5qk7qyGMdxzRRRWpyhRRRQBbsdYvdNVha3UsCt1VGIB/CrFlrlxb3JmaV3kY5LM2SazKKVkVzO1rnXafqcW6Y2s4sBOcz25iWW2mPXc8TcZzySpUnuTU/7izhkaG4stMEg2v8A2HYLZu6/3S+52A/3SPrXFhyvQ05pnbgsaXKXzm6fEA06FbfT0W2gRtyqnr1yT1JPcnk1ual8RIZ9KdLaGSO8mG192NqcYJB71wdFS4RlZsuFecE1F7m1/adpfLGNQsbW+KD5TcQq5X6EjikvddLW/wBmto47W3HSKFAi/kKxqKuxlzMCcnJooopkBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAf/9k=";const x=D({name:"Nav",components:{RegisterAndLogin:M(()=>N(()=>import("./RegisterAndLogin.554e1066.js"),["assets/RegisterAndLogin.554e1066.js","assets/RegisterAndLogin.bc2eab23.css","assets/index.300a62bc.js","assets/index.5e25cb11.css"]))},computed:{userInfo(){let e={_id:"",name:"",avatar:""};return window.sessionStorage.userInfo&&(e=JSON.parse(window.sessionStorage.userInfo),this.$store.commit("SAVE_USER",{userInfo:e})),this.$store.state.user.userInfo&&(e=this.$store.state.user.userInfo),e}},watch:{$route:{handler(e,o){this.routeChange(e,o)},immediate:!0}},mounted(){this.routeChange(this.$route,this.$route);const e=V("code");e&&this.getUser(e)},setup(e,o){const U=T(z),y=K(),t=q({visible:!1,handleFlag:"",title:"\u6162\u6162\u559C\u6B22\u4F60",list:[{index:"1",path:"/",name:"\u9996\u9875"},{index:"2",path:"/articles",name:"\u6587\u7AE0"},{index:"3",path:"/timeline",name:"\u5386\u7A0B"},{index:"4",path:"/ToLoveStory",name:"\u793C\u7269"}],activeIndex:"0",enterSlideUp:!1,leaveSlideDown:!1,isShow:!1,isMobile:L()}),R=(a,s)=>{for(let A=0;A<t.list.length;A++){const g=t.list[A];if(g.path===a.path){t.activeIndex=A+1+"",t.title=g.name;break}}},c=(a,s)=>{t.activeIndex=a},v=a=>{t.visible=a},f=a=>{t.visible=a},F=a=>{t.handleFlag=a,t.visible=!0},p=()=>{window.localStorage.removeItem("token")};return{state:t,handleCancel:f,handleOk:v,handleClick:F,handleLogout:p,handleClickMenu:a=>{t.isShow=!1,a==="/login"&&(t.handleFlag="login",t.visible=!0),a==="/register"&&(t.handleFlag="register",t.visible=!0),a==="/logout"&&p()},handleMenu:()=>{t.isShow=!0,t.enterSlideUp=!0},getUser:async a=>{const s=O.service({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.7)"}),A=await W.post(H.getUser,{code:a},{withCredentials:!0});s.close();const g={_id:A._id,name:A.name,avatar:A.avatar};U.commit("SAVE_USER",{userInfo:g}),window.sessionStorage.userInfo=JSON.stringify(g),P({message:"\u64CD\u4F5C\u6210\u529F",type:"success"});let S=JSON.parse(window.sessionStorage.preventHistory);S&&y.push({path:S.name,query:S.query})},handleSelect:c,routeChange:R,handleHideMenu:()=>{t.enterSlideUp=!1,t.leaveSlideDown=!0,setTimeout(()=>{t.leaveSlideDown=!1,t.isShow=!1},300)}}}}),B=e=>(J("data-v-22c31dca"),e=e(),Y(),e),$={key:0,class:"nav"},ee={class:"nav-content"},te=B(()=>n("img",{class:"logo",src:b,alt:"\u68C9\u82B1\u7F8A logo"},null,-1)),oe={class:"nav-right"},se={class:"el-dropdown-link"},ne=B(()=>n("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)),ae={key:0,class:"user-img",src:Z,alt:"\u5C0F\u66FC\u66FC logo"},le=["src"],ie=m("\u767B \u51FA"),de={class:"nav-right"},ue=m("\u767B\u51FA"),re={key:1,class:"nav"},ce={class:"nav-mobile"},Ae={class:"nav-mobile-logo"},me=B(()=>n("img",{class:"logo fl",src:b,alt:"\u6211\u662F\u68C9\u82B1\u7F8A"},null,-1)),ve={class:"title"},ge=B(()=>n("i",{class:"el-icon-menu"},null,-1)),he=[ge],pe={class:"list"},Be=m("\u9996 \u9875"),fe=m("\u6587 \u7AE0"),Fe=m("\u5386 \u7A0B"),Se=m("\u793C \u7269");function ke(e,o,U,y,t,R){const c=u("router-link"),v=u("el-col"),f=u("el-menuItem"),F=u("el-menu"),p=u("el-dropdown-item"),C=u("el-dropdown-menu"),Q=u("el-dropdown"),I=u("el-button"),E=u("el-row"),a=u("RegisterAndLogin");return d(),r("div",null,[e.state.isMobile?(d(),r("div",re,[n("div",ce,[n("div",Ae,[i(c,{to:"/"},{default:l(()=>[me]),_:1})]),n("div",ve,k(e.state.title),1),n("div",{class:"menu",onClick:o[1]||(o[1]=(...s)=>e.handleMenu&&e.handleMenu(...s))},he)]),e.state.isShow?(d(),r("div",{key:0,class:_(["nav-mobile-content",{"enter-slideUp":e.state.enterSlideUp,"leave-slideDown":e.state.leaveSlideDown}])},[n("div",pe,[n("div",{onClick:o[2]||(o[2]=s=>e.handleClickMenu("")),class:"item"},[i(c,{to:"/"},{default:l(()=>[Be]),_:1})]),n("div",{onClick:o[3]||(o[3]=s=>e.handleClickMenu("/articles")),class:"item"},[i(c,{to:"/articles"},{default:l(()=>[fe]),_:1})]),n("div",{onClick:o[4]||(o[4]=s=>e.handleClickMenu("/timeline")),class:"item"},[i(c,{to:"/timeline"},{default:l(()=>[Fe]),_:1})]),n("div",{onClick:o[5]||(o[5]=s=>e.handleClickMenu("/toLoveStory")),class:"item"},[i(c,{to:"/toLoveStory"},{default:l(()=>[Se]),_:1})]),n("div",{onClick:o[6]||(o[6]=s=>e.handleLogout()),class:"item"},"\u767B \u51FA"),e.userInfo._id?(d(),r("div",{key:0,onClick:o[7]||(o[7]=s=>e.handleClickMenu("/logout")),class:"item"}," \u767B \u51FA ")):h("",!0)])],2)):h("",!0)])):(d(),r("div",$,[n("div",ee,[i(E,{gutter:20},{default:l(()=>[i(v,{span:3},{default:l(()=>[i(c,{to:"/"},{default:l(()=>[te]),_:1})]),_:1}),i(v,{span:16},{default:l(()=>[i(F,{router:!0,"default-active":e.state.activeIndex,"active-text-color":"#409eff",class:"el-menu-demo",mode:"horizontal",onSelect:e.handleSelect},{default:l(()=>[(d(!0),r(G,null,X(e.state.list,s=>(d(),w(f,{route:s.path,index:s.index,key:s.index},{default:l(()=>[m(k(s.name),1)]),_:2},1032,["route","index"]))),128))]),_:1},8,["default-active","onSelect"])]),_:1}),e.userInfo._id?(d(),w(v,{key:0,span:5},{default:l(()=>[n("div",oe,[i(Q,{onCommand:e.handleLogout},{default:l(()=>[n("span",se,[m(k(e.userInfo.name),1),ne]),e.userInfo.avatar?h("",!0):(d(),r("img",ae)),e.userInfo.avatar?(d(),r("img",{key:1,class:"user-img",src:e.userInfo.avatar,alt:"BiaoChenXuYing"},null,8,le)):h("",!0),i(C,{slot:"dropdown"},{default:l(()=>[i(p,{command:"logout"},{default:l(()=>[ie]),_:1})]),_:1})]),_:1},8,["onCommand"])])]),_:1})):(d(),w(v,{key:1,span:4},{default:l(()=>[n("div",de,[i(I,{size:"small",type:"danger",onClick:o[0]||(o[0]=s=>e.handleLogout())},{default:l(()=>[ue]),_:1})])]),_:1}))]),_:1})])])),e.state.isShow?(d(),r("div",{key:2,class:_(["mask",{"mask-fade-out":e.state.leaveSlideDown}]),onClick:o[8]||(o[8]=(...s)=>e.handleHideMenu&&e.handleHideMenu(...s))},null,2)):h("",!0),i(a,{visible:e.state.visible,isMobile:e.state.isMobile,handleFlag:e.state.handleFlag,onOk:e.handleOk,onCancel:e.handleCancel},null,8,["visible","isMobile","handleFlag","onOk","onCancel"])])}var Ue=j(x,[["render",ke],["__scopeId","data-v-22c31dca"]]);export{Ue as default};
