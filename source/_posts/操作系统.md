---
title: 操作系统
date: 2021-12-19 19:07:10
categories: 专业课程
tags: [大二,知识总结,操作系统]

---

# 绪论

#### 1.操作系统目标：			

1. 方便性
2. 有效性
3. 可扩充性
4. 开放性

#### 2.单道批处理系统特点：	

1. 自动性
2. 顺序性
3. 单道性

#### 3.多道批处理系统特点：	

1. 资源利用率高
2. 系统吞吐量大
3. 平均周转时间长
4. 无交互能力

#### 4.分时系统特点：			

1. 多路性
2. 独立性
3. 及时性
4. 交互性

#### 5.实时系统特点：			

1. 多路性
2. 独立性
3. 及时性
4. 交互性
5. 可靠性

#### 6.操作系统基本特性：	

1. 并发（并行）
2. 共享
3. 虚拟

#### 7.操作系统基本类型：	

1. 批处理操作系统
2. 分时操作系统
3. 实时操作系统

#### 8.操作系统主要功能；

**三个接口、四个管理**

- 三个接口：命令接口、图形界面接口、程序接口（系统调用）

- 处理机管理：进程控制、进程同步、进程通信、进程调度

- 存储器管理：内存分配、内存保护、地址映射、内存扩充

- 存储机管理目标：提高利用率、方便用户使用、提供足够的存储空间、方便进程并发执行

- 设备管理：缓冲管理、设备管理、设备处理

- 设备管理目标：方便的设备使用、提高CPU与I/O设备利用率、提高I/O速度

#### 9.文件系统：

1. 文件存储空间的管理
2. 目录管理
3. 文件读写管理和保护

#### 10.通用操作系统：

1. 兼有 分时
2. 实时
3. 批处理三者或两者的操作系统

#### 11.网络操作系统目标：

相互通信、资源共享

#### 12.中断必须在核心态（管态）进行

#### 13.通道技术是一种硬件技术，需要硬件支持：			

1. 时钟管理
2. 地址映射（←重定位→）
3. 中断系统

#### 14.中断处理保存：

断点、PSW；			

#### 15.子程序调用仅保存：

断点

#### 16.异常与中断：

**异常：**

- 处理器内部发生的特殊事件

**中断：**	

- 处理器外部的请求事件

#### 16.系统调用顺序：		

1. 传递参数
2. 执行trap
3. 执行相应服务
4. 返回用户态

# 第二章

#### 1.顺序执行特征：	

1. 顺序性
2. 封闭性
3. 可再现性

#### 2.并行执行特征：	

1. 间断性
2. 失去封闭性
3. 不可再现性

#### 3.进程特征：		

1. 动态性
2. 并发性
3. 独立性
4. 异步性
5. 结构性

#### 4.结构性组成：	

1. PCB（进程控制块）		
   1. 进程标志信息
   2. 控制信息
   3. 资源信息
   4. CPU现场信息

2. 程序段

3. 数据段

#### 5.进程创建步骤：	

1. 申请空白PCB
2. 分配资源
3. 初始化PCB
4. 插入就绪队列

#### 6.同步机制准则：	

1. 空闲让进
2. 忙则等待
3. 有限等待
4. 让权等待

#### 7.线程意义：		

1. 简化程序设计模型
2. 创建/撤销速度快
3. 加快程序执行速度

#### 8.挂起步骤：		

得到内部标识符、更改状态

#### 9.四类通信

1. 低级通信：进程互斥和同步

2. 高级通信：共享存储器系统、消息传递系统、管道通信系统

3. 信箱原语：发送原语、接受原语（间接通信）

4. 消息缓存通信：PCB应增加 消息队列首指针、消息队列互斥信号量、消息队列资源信号量

#### 10.进程与线程的选择

引入**进程**优点：	资源利用率提高、系统吞吐量增加

引入**线程**优点：	减少了程序执行时的时空开销

# 第三章

#### 1.调度层次：		

作业调度（高级）、内存调度（中级）、进程调度（低级）

#### 2.分时系统包括：	

进程调度、中级调度

#### 3.死锁必要条件：

互斥、请求和保持、不剥夺、环路等待

#### 4.作业调度：		

从 后背作业队列 中选出一 批 作业，为他们分配资源，创建进程

- CPU繁忙型：	长作业			
- I/O繁忙型：	短作业

#### 5.中断向量：		

中断服务例行程序的入口地址

#### 6.不需要信号量就可以实现的功能：	

进程的并发执行

#### 7.临界与共享：	

能否被并发使用

#### 8.共享程序段必须用可重入编码编写

#### 9.管程组成部分：	

1. 管程内的共享变量说明

2. 对管程内数据结构进行操作的一组过程

3.  管程内数据初始化语句

#### 10.X .wait操作：	

阻塞该进程，并将之插入x的阻塞队列中

#### 11.死锁

四个**条件**：

- 互斥
- 不剥夺
- 请求和保持
- 循环等待

四个**方式**：

- 预防死锁：		破坏四个条件

- 避免死锁：		避免进入不安全状态、银行家算法

- 检测死锁：		利用“死锁定理”化简“资源分配图”。不采取措施进行限制

- 解除死锁：		抢夺死锁资源、撤销死锁进程、进程回退

死锁**根本原因**：	

- 系统资源分配不足
- 进程推进顺序非法



# 内存管理

#### 1.内存管理功能：	

1. 内存空间的分配与回收
2. 地址转换
3. 内存空间的扩充
4. 存储保护

#### 2.程序装入过程：	

编译、链接、装入

- 链接方式：形成逻辑地址		
  - 静态链接
  - 装入时动态链接
  - 运行时动态链接

- 装入方式：逻辑地址转物理地址	
  - 绝对装入
  - 可重定位装入
  - 动态运行时装入

#### 3.覆盖与交换

目的是节省主存空间，逻辑上扩大主存

- 交换技术：用于进程间、覆盖用于同一个进程
- 进程在I/O操作时，不能交换出主存

#### 4.存储器管理

目的：方便用户、提高内存利用率     

- 分区
  - 操作系统代价最小的存储管理
  - 固定分区存储管理中，每个分区的大小是可以不同但预先固定

- 页式存储管理：
  - 最多内存碎片 ：	最佳适应算法    

- 分段存储管理：	
  - 外部碎片，其余内部碎片

- 段页式存储：	
  - 每个进程一张段表、每个段一张页表
  - 好处：
    - 方便编程
    - 共享和保护
    - 动态链接和增长

#### 5.内存保护：		

有操作系统和硬件机构合作完成

#### 6.可重入程序：	

通过减少对换数量来改善系统性能

#### 7.固定分配与全局置换不能组合使用   



# 设备管理

## 1.I/O系统

#### 包括：

信息输入、输出、存储功能的设备和控制器

#### 基本任务：		

1. 完成用户提出的I/O请求

2. 提高I/O速率

3. 改善I/O利用率

#### 主要功能：		

1. 缓冲区管理
2. 设备分配
3. 设备处理
4. 虚拟设备
5. 实现设备独立性

#### I/O系统组成：	

##### 1.I/O设备

| 设备     | 用途     | 物理结构 | 结构   | 传输效率 | 能否寻址 | 中断方式     |
| -------- | -------- | -------- | ------ | -------- | -------- | ------------ |
| 块设备   | 存储     | 数据块   | 有结构 | 高       | 能       | DMA方式      |
| 字符设备 | 输入输出 | 字符     | 无结构 | 低       | 否       | 中断驱动方式 |



##### 2.设备控制器

分类：

1. 控制字符设备
2. 控制块设备

基本功能：

1. 控制寄存器
2. 数据寄存器
3. 状态寄存器
4. 地址译码器

组成：

1. 与处理机接口
   1. 数据线(连接)
   2. 地址线
   3. 控制线
2. 与设备接口
3. I/O逻辑

##### 3.I/O通道

（1）类型：

1. 字节多路通道（分时并行）
2. 数组选择通道（速率快）
3. 数组多路通道
4. 为使多个进程能有效的同时处理I/O最好使用“缓冲池”

（2）I/O方式：

1. 程序I/O方式：CPU不断测试设备是否空闲
2. 中断驱动方式：I/O设备主动打断CPU的运行并请求服务
3. DMA方式：I/O设备与内存之间开辟直接的数据交换道路，开始与结束时才需要CPU干预，基本单位是`数据块`
   - 寄存器：
     1. 命令寄存器
     2. 内存地址寄存器（起始目标地址、内存源地址）
     3. 数据寄存器
     4. 数据计数器      
   - DMA局限性：	
     - 传送方向、地址、长度由CPU控制
     - 一个设备一个DMA，成本高

（3）控制：实现CPU、通道、I/O设备并行操作

（4）设备驱动程序：

1. 接受命令和参数
2. 检查合法性
3. 设置工作方式
4. 响应中断
5. 自动构成通道程序

（5）共享设备必须是可寻址和可随机访问的设备

（6）为实现设备分配，应为每类设备设置一张设备控制表。在系统中配置一张系统设备表；为实现设备的独立性，系统中应设置一张逻辑设备表

（7）主机通常是通过“通道”和“设备控制器”与外设相连。

（8）Spooling系统

1. 磁盘中的“输入井”和“输出井”
   - 对脱机I/O工作方式模拟哦
2. 内存中的“输入缓冲区”和“输出缓冲区”
   - 对磁盘进行模拟
3. “输入进程”和“输出进程”构成
   - 对外围控制机进行模拟

（9）设备管理器引入缓冲机制的原因：

1. 缓和CPU与I/O设备速度不匹配

2. 减少中断次数和CPU中断处理

3. 提高CPU和I/O设备并行性



#### 4.计算机



# 文件管理

**任务**：提供存储、检索、共享和保护文件的手段

**功能**：分配与管理外存、提供合适的存储方法、文件共享，保护解决冲突

### (1)文件：

<u>管理方式、程序或数据的结合、关联字符流的集合或关联记录</u>

分类：

1. 有结构文件：若干相关记录组成
2. 无结构文件：字符流

### (2)文件系统

从系统角度看：

- 文件系统是一个负责文件存储空间管理的机构

从用户角度看：

- 文件系统是用户在计算机上存储信息，使用信息的接口

文件系统模型：

1. 对象及其属性
2. 对对象操纵和管理的软件集合
   1. I/O控制层：I/O操作和对设备发来的中断信号进行处理
   2. 基本文件系统：内存与磁盘或磁单机系统之间数据块的交换
   3. 基本I/O管理程序：与磁盘I/O有关的大量事务
   4. 逻辑文件系统：文件和记录相关操作
3. 文件系统接口

### (3)对文件的操作：

1. 创建文件
2. 删除文件
3. 读文件
4. 写文件
5. 截断文件
6. 设置文件的读/写位置
7. 其他文件操作：
   1. 文件属性操作
   2. 有关目录操作
   3. 实现文件共享的系统调用
   4. 用于对文件系统进行操作的系统调用

### (4)文件逻辑结构：

1. 顺序文件
2. 索引文件
3. 顺序索引文件（组顺序内索引）
4. 直接文件
5. 哈希文件

### (5)物理块是分配和传输信息的基本单位

### (6)外存分配方式：

1. 连续分配
2. 链接分配
3. 索引分配（为每个文件分配一个索引块）

### (7)文件控制块的有序集合成为文件目录

