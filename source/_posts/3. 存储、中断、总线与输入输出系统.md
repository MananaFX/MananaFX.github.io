---
title: 3.存储、中断、总线与输入/输出系统
date: 2022-05-20 13:59:10
categories: 系统结构
tags: [大三,笔记,系统结构]
---



# 3. 存储、中断、总线与输入/输出系统

## 理解

### 一、并行主存系统的组织形式、极限频宽和实际频宽的关系

#### 1.组织形式

**单体多字**：同时读单存储器的n位

**多体单字**：由许多容量较小、字长较短的存储器片子组搭而成的大容量半导体主存，每个存储片子都有其自己的外围电路

- M<sub>j</sub>体的编制模式位m × i + j，m为模体总数量
- 每个访问周期平均能访问到的次数 B = （1 - （ 1 - λ ）<sup>m</sup> ） /  λ

**多体多字**

#### 2.关系

实际频宽不到最大频宽的1/3

- 程序指令中存在转移
- 数据的顺序性比指令差
- 模m越高，传输延迟越大（存储器数据总线越长，总线上并联的负载越重）

### 二、通过使用主存的组成技术提高主存实际频宽的可能性、局限性和发展存储体系的必要性

### 三、中断源的分类和分级的原因。理解中断响应次序、中断处理次序和中断处理完成次序的概念。

#### 1.中断源分类

原因：减少中断处理程序的入口，每一类给一个中断服务程序总入口，可以减少中断服务程序入口地址形成的硬件数量

中断：

- 机器校验：设备故障
- 访管：需要操作系统介入
- 程序性：指令和数据格式错、程序执行中出现异常
- 外部
- 输入/输出
- 重新启动

#### 2.中断源分级

原因：当多个中断源同时发生中断请求时，CPU只能先相应和处理其中优先级相对高的中断请求，因此需要对中断源的相应和处理安排一个优先次序

分级：

1. 机器校验
2. 程序性和管理程序调用
3. 外部
4. 输入/输出
5. 重新启动

#### 3.中断响应次序

同时发生多个不同中断类的中断请求时，中断响应硬件中的**排队器**所决定相应次序

#### 4.中断处理次序

处理中断请求的次序

### 四、非专用总线的3种总线控制方式的总线分配过程、优缺点及所需增加的辅助控制总线数。

#### 1.串行链接

优点：

- 算法简单，控制线少只需3根：总线可用、总线请求、总线忙
- 部件增减容易，可扩充性好
- 逻辑简单，容易通过重复设置提高可靠性

缺点：

- 失效敏感
- 优先级用线连固定，不灵活
- 限制了总线的分配速度
- 因为总线长度的的限制，增减或移动部件受到限制

#### 2.定时查询

优点：

- 计数初值、部件号均由程序设定，优先次序用程序控制，灵活性强
- 不会因某部件失效影响其他部件，**可靠性高**

缺点：

- 控制线数目多：[2+ lb N ]根
- 部件数受限于定时查询线的线数（编制能力）
- 控制较为复杂
- 总线分配速度取决于技术信号的频率和部件数

#### 3.独立请求

优点：

- 总线分配速度快，不用查询
- 控制器可以灵活确定下一个使用总线的部件
- 方便隔离失效不见得请求

缺点：

- 控制线数量过大，需要 **2N+1**根
- 总线控制器夫大得多

### 五、总线采用同步和异步通信方式的通信过程、优缺点和适用场合。

#### 1.同步通信

优点：

- 传送速率高
- 受总线长度影响小

缺点：

- 时钟在总线上的时滞可能造成同步误差
- 时钟线上的干扰信号易引起误同步

#### 2.异步通信

异步双向互锁方式:

- 适应不同速度的I/O设备
- 保证数据传送的正确性
- 较高的数据传送速率
- 控制硬件复杂
- 适用于I/O总线

### 六、I/O系统的三种方式中处理机的两种处理方式。

#### 1.通道方式

#### 2.外围处理机方式

### 七、外围处理机的工作原理以及它与通道处理机的不同。



## 掌握

### **一、按中断处理次序设置各中断处理程序中中断屏蔽位的状态**🌟

根据题目确定屏蔽是0还是1

### **二、正确画出多种中断申请时，CPU执行程序时的状态转移过程示意图**🌟

### 三、专用和非专用总线的定义、优缺点和适用场合

#### 1.专用总线

定义：只连接一对物理部件的总线

优点：

- 多个部件可以同时收/发信息，不争用总线，系统流量高
- 通信不用指明源和目的，控制简单
- 总线失效影响校，系统可靠

缺点：

- 总线数多，总线较长时成本相当高
- 时间利用率低
- 不利于系统模块化

适用场合：某个设备**仅**与另一个设备的连接

#### 2.非专用总线

定义：被多种功能或多个部件分时共享，同一时间只有一对部件可使用总线进行通信

优点：

- 总线数少，造价低
- 总线接口标准化，模块性强
- 可扩充能力强，部件的增加不会使电缆、接口和驱动电路激增
- 易用多重总线来提高总线带宽和可靠性，使故障弱化

缺点：

- 系统流量小，经常出现总线争用
- 可能限制系统速度性能
- 共享总线失效会导致系统瘫痪

适用场合：I/O系统

### 四、通道方式I/O处理机进行输入/输出工作的全过程及通道处理机的工作原理

定义：具有**输入输出处理控制**的输入输出部件，有**自己的指令即通道命令**，能执行有限输入输出指令，同时管理多台I/O设备的**小型专用DMA处理机**。负担原来CPU对外部设备的管理、控制和大部分输入输出工作。

功能：

- 接收CPU的I/O指令，选择对应I/O设备与通道连接
- 执行CPU为通道组织的通道程序
- 计算I/O设备的有关地址
- 给出主存缓冲区的起始地址
- 控制I/O设备与MM间的数据交换
- 指定I/O操作结束时，要执行的善后操作，如中断
- 检查外围设备的工作状态
- 实现I/O设备和MM间的数据格式转换

过程：

1. 在用户程序中使用访管指令进入OS管理程序，由OS管理程序编制一个通道程序，并启动通道
2. 通道处理机执行CPU为它组织的通道程序， 完成指定的数据输入输出工作。
3. 通道程序结束后向CPU发中断请求。CPU相应这个中断请求后，第二次进入操作系统，调用管理程序对输入输出中断请求进行处理

### 五、字节多路、数组多路和选择三种通道各自采用的数据宽度及适用的场合。

字节多路：

- 单字节
- 大量字符类**低速**设备

数组多路：

- 定长块
- 多台高速磁盘存储器

选择

- 不定长块
- **高优先级**的**高速**磁带或磁盘设备

### 六、处理机和I/O系统的流量计算和分析，字节多路通道流量的计算、通道周期的设计。

![image-20220522230557242](https://raw.githubusercontent.com/MananaFX/CDN/main/post/202205222305306.png?token=AYWBIYY5KAMN4GNAPWZDET3CRJIZE)

- P：通道所挂设备数；
- T<sub>S</sub>：通道每选择一次设备的时间； 
-  n：每台设备传送的字节数；
- T<sub>D</sub>：每传送一个字节的时间； 
- K：数组多路通道的定长块的大小

### **七、准确画出通道处理机响应和处理完各外设请求的时空示意图。**🌟



