import{_ as f,d as L,r as y,g as c,C as v,E as C,G as w,H as E,e as d,f as i,h as k,w as A,T,x as h,j as _,I as b,J as B,K as H,p,q as r,F as S,v as N,t as g}from"./index.068f50e1.js";import{L as $}from"./LoadEnd.8be8d25d.js";import{L as z}from"./Loading.0f685193.js";var D="./assets/songguo.19a0a4e3.jpg";const V=window.innerHeight||document.documentElement.clientHeight,j=b(()=>{const e=document.querySelectorAll("#list .item img");let n=0;for(let t=n;t<e.length;t++){let l=V-e[t].getBoundingClientRect().top,s=e[t];l>=100&&(s.getAttribute("data-has-lazy-src")==="false"&&(s.src=s.getAttribute("data-src"),s.setAttribute("data-has-lazy-src","true")),n=t+1)}},1e3),x=L({name:"Articles",components:{LoadEnd:$,LoadingCustom:z},watch:{$route:{handler(e,n){this.routeChange(e,n)},immediate:!0}},setup(e,n){const t=y({isLoadEnd:!1,isLoading:!1,articlesList:[],total:0,params:{keyword:"",tag_id:c("tag_id"),category_id:c("category_id")},href:"http://localhost:3001/articleDetail?article_title="}),l=a=>B(a,!0),s=()=>{H({url:"/static/articleslist.json",method:"get"}).then(a=>{console.log(a),t.total=a.list.length,t.articlesList=a.list})},m=(a,u)=>{t.params.tag_id=c("tag_id"),t.params.category_id=c("category_id"),t.articlesList=[],t.params.pageNum=1,s()};return v(()=>{s(),window.onscroll=()=>{C()+w()>E()-100&&t.isLoadEnd===!1&&t.isLoading===!1&&s()},document.addEventListener("scroll",j)}),{state:t,formatTime:l,getData:s,routeChange:m}}}),I={class:"left clearfix"},q={class:"articles-list",id:"list"},F=["href"],G=["data-src"],J={class:"content"},K={class:"title"},M={class:"abstract"},Q={class:"meta"},R={key:0,class:"time"};function W(e,n,t,l,s,m){const a=p("LoadingCustom"),u=p("LoadEnd");return r(),d("div",I,[i("ul",q,[k(T,{name:"el-fade-in"},{default:A(()=>[(r(!0),d(S,null,N(e.state.articlesList,o=>(r(),d("li",{key:o.title,class:"item"},[i("a",{href:e.state.href+o.name,target:"_blank"},[i("img",{class:"wrap-img img-blur-done","data-src":o.img_url,"data-has-lazy-src":"false",src:D,alt:"\u6587\u7AE0\u5C01\u9762"},null,8,G),i("div",J,[i("h4",K,g(o.title),1),i("p",M,g(o.desc),1),i("div",Q,[o.create_time?(r(),d("span",R,g(e.formatTime(o.create_time)),1)):_("",!0)])])],8,F)]))),128))]),_:1})]),e.state.isLoading?(r(),h(a,{key:0})):_("",!0),e.state.isLoadEnd?(r(),h(u,{key:1})):_("",!0)])}var X=f(x,[["render",W],["__scopeId","data-v-0812449a"]]);export{X as default};
