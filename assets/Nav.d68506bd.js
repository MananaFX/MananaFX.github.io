import{_ as j,d as D,a as N,b as M,g as V,u as T,k as z,c as K,r as q,i as O,e as c,f as s,h as l,w as a,t as U,n as I,j as p,l as W,s as H,m as L,o as P,p as d,q as i,F as G,v as X,x as _,y as A,z as J,A as Y,B as Z}from"./index.a2b0801f.js";var b="data:image/jpeg;base64,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";const x=D({name:"Nav",components:{RegisterAndLogin:N(()=>M(()=>import("./RegisterAndLogin.5a76c9c6.js"),["assets/RegisterAndLogin.5a76c9c6.js","assets/RegisterAndLogin.bf60cbae.css","assets/index.a2b0801f.js","assets/index.ea89c89e.css"]))},computed:{userInfo(){let e={_id:"",name:"",avatar:""};return window.sessionStorage.userInfo&&(e=JSON.parse(window.sessionStorage.userInfo),this.$store.commit("SAVE_USER",{userInfo:e})),this.$store.state.user.userInfo&&(e=this.$store.state.user.userInfo),e}},watch:{$route:{handler(e,n){this.routeChange(e,n)},immediate:!0}},mounted(){this.routeChange(this.$route,this.$route);const e=V("code");e&&this.getUser(e)},setup(e,n){const B=T(z),k=K(),o=q({visible:!1,handleFlag:"",title:"\u6162\u6162\u559C\u6B22\u4F60",list:[{index:"1",path:"/",name:"\u9996\u9875"},{index:"2",path:"/articles",name:"\u6587\u7AE0"},{index:"3",path:"/timeline",name:"\u5386\u7A0B"},{index:"4",path:"/ToLoveStory",name:"\u793C\u7269"}],activeIndex:"0",enterSlideUp:!1,leaveSlideDown:!1,isShow:!1,isMobile:O()}),R=(t,F)=>{for(let u=0;u<o.list.length;u++){const h=o.list[u];if(h.path===t.path){o.activeIndex=u+1+"",o.title=h.name;break}}},r=(t,F)=>{o.activeIndex=t},m=t=>{o.visible=t},f=t=>{o.visible=t},S=t=>{o.handleFlag=t,o.visible=!0},g=()=>{window.sessionStorage.userInfo="",B.commit("SAVE_USER",{userInfo:{_id:"",name:"",avatar:""}})};return{state:o,handleCancel:f,handleOk:m,handleClick:S,handleLogout:g,handleClickMenu:t=>{o.isShow=!1,t==="/login"&&(o.handleFlag="login",o.visible=!0),t==="/register"&&(o.handleFlag="register",o.visible=!0),t==="/logout"&&g()},handleMenu:()=>{o.isShow=!0,o.enterSlideUp=!0},getUser:async t=>{const F=W.service({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.7)"}),u=await H.post(L.getUser,{code:t},{withCredentials:!0});F.close();const h={_id:u._id,name:u.name,avatar:u.avatar};B.commit("SAVE_USER",{userInfo:h}),window.sessionStorage.userInfo=JSON.stringify(h),P({message:"\u64CD\u4F5C\u6210\u529F",type:"success"});let w=JSON.parse(window.sessionStorage.preventHistory);w&&k.push({path:w.name,query:w.query})},handleSelect:r,routeChange:R,handleHideMenu:()=>{o.enterSlideUp=!1,o.leaveSlideDown=!0,setTimeout(()=>{o.leaveSlideDown=!1,o.isShow=!1},300)}}}}),v=e=>(J("data-v-6474643a"),e=e(),Y(),e),$={key:0,class:"nav"},ee={class:"nav-content"},te=v(()=>s("img",{class:"logo",src:b,alt:"\u68C9\u82B1\u7F8A logo"},null,-1)),oe={class:"nav-right"},se={class:"el-dropdown-link"},ne=v(()=>s("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)),ae={key:0,class:"user-img",src:Z,alt:"\u5C0F\u66FC\u66FC logo"},le=["src"],ie=A("\u767B \u51FA"),de={key:1,class:"nav"},re={class:"nav-mobile"},ue={class:"nav-mobile-logo"},ce=v(()=>s("img",{class:"logo fl",src:b,alt:"\u6211\u662F\u68C9\u82B1\u7F8A"},null,-1)),Ae={class:"title"},me=v(()=>s("i",{class:"el-icon-menu"},null,-1)),he=[me],pe={class:"list"},ge=A("\u9996 \u9875"),ve=A("\u6587 \u7AE0"),Be=A("\u5386 \u7A0B"),fe=A("\u793C \u7269");function Se(e,n,B,k,o,R){const r=d("router-link"),m=d("el-col"),f=d("el-menuItem"),S=d("el-menu"),g=d("el-dropdown-item"),y=d("el-dropdown-menu"),Q=d("el-dropdown"),C=d("el-row"),E=d("RegisterAndLogin");return i(),c("div",null,[e.state.isMobile?(i(),c("div",de,[s("div",re,[s("div",ue,[l(r,{to:"/"},{default:a(()=>[ce]),_:1})]),s("div",Ae,U(e.state.title),1),s("div",{class:"menu",onClick:n[0]||(n[0]=(...t)=>e.handleMenu&&e.handleMenu(...t))},he)]),e.state.isShow?(i(),c("div",{key:0,class:I(["nav-mobile-content",{"enter-slideUp":e.state.enterSlideUp,"leave-slideDown":e.state.leaveSlideDown}])},[s("div",pe,[s("div",{onClick:n[1]||(n[1]=t=>e.handleClickMenu("")),class:"item"},[l(r,{to:"/"},{default:a(()=>[ge]),_:1})]),s("div",{onClick:n[2]||(n[2]=t=>e.handleClickMenu("/articles")),class:"item"},[l(r,{to:"/articles"},{default:a(()=>[ve]),_:1})]),s("div",{onClick:n[3]||(n[3]=t=>e.handleClickMenu("/timeline")),class:"item"},[l(r,{to:"/timeline"},{default:a(()=>[Be]),_:1})]),s("div",{onClick:n[4]||(n[4]=t=>e.handleClickMenu("/toLoveStory")),class:"item"},[l(r,{to:"/toLoveStory"},{default:a(()=>[fe]),_:1})])])],2)):p("",!0)])):(i(),c("div",$,[s("div",ee,[l(C,{gutter:20},{default:a(()=>[l(m,{span:3},{default:a(()=>[l(r,{to:"/"},{default:a(()=>[te]),_:1})]),_:1}),l(m,{span:16},{default:a(()=>[l(S,{router:!0,"default-active":e.state.activeIndex,"active-text-color":"#409eff",class:"el-menu-demo",mode:"horizontal",onSelect:e.handleSelect},{default:a(()=>[(i(!0),c(G,null,X(e.state.list,t=>(i(),_(f,{route:t.path,index:t.index,key:t.index},{default:a(()=>[A(U(t.name),1)]),_:2},1032,["route","index"]))),128))]),_:1},8,["default-active","onSelect"])]),_:1}),e.userInfo._id?(i(),_(m,{key:0,span:5},{default:a(()=>[s("div",oe,[l(Q,{onCommand:e.handleLogout},{default:a(()=>[s("span",se,[A(U(e.userInfo.name),1),ne]),e.userInfo.avatar?p("",!0):(i(),c("img",ae)),e.userInfo.avatar?(i(),c("img",{key:1,class:"user-img",src:e.userInfo.avatar,alt:"BiaoChenXuYing"},null,8,le)):p("",!0),l(y,{slot:"dropdown"},{default:a(()=>[l(g,{command:"logout"},{default:a(()=>[ie]),_:1})]),_:1})]),_:1},8,["onCommand"])])]),_:1})):p("",!0)]),_:1})])])),e.state.isShow?(i(),c("div",{key:2,class:I(["mask",{"mask-fade-out":e.state.leaveSlideDown}]),onClick:n[5]||(n[5]=(...t)=>e.handleHideMenu&&e.handleHideMenu(...t))},null,2)):p("",!0),l(E,{visible:e.state.visible,isMobile:e.state.isMobile,handleFlag:e.state.handleFlag,onOk:e.handleOk,onCancel:e.handleCancel},null,8,["visible","isMobile","handleFlag","onOk","onCancel"])])}var we=j(x,[["render",Se],["__scopeId","data-v-6474643a"]]);export{we as default};
