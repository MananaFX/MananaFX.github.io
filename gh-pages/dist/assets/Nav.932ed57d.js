import{_ as N,d as V,a as D,b as O,g as L,u as R,k as H,c as j,r as z,i as X,e as u,f as i,h as a,w as o,t as g,n as B,j as p,l as Y,s as q,m as J,o as P,p as m,q as d,F as T,v as Q,x as I,y as r,z as G,A as K}from"./index.a6c95b9f.js";import{_ as W}from"./user.9f14763c.js";var U="./assets/logo.920b5df0.jpg";const Z=V({name:"Nav",components:{RegisterAndLogin:D(()=>O(()=>import("./RegisterAndLogin.e940c0de.js"),["assets/RegisterAndLogin.e940c0de.js","assets/RegisterAndLogin.bf60cbae.css","assets/index.a6c95b9f.js","assets/index.56ce0c1d.css"]))},computed:{userInfo(){let e={_id:"",name:"",avatar:""};return window.sessionStorage.userInfo&&(e=JSON.parse(window.sessionStorage.userInfo),this.$store.commit("SAVE_USER",{userInfo:e})),this.$store.state.user.userInfo&&(e=this.$store.state.user.userInfo),e}},watch:{$route:{handler(e,n){this.routeChange(e,n)},immediate:!0}},mounted(){this.routeChange(this.$route,this.$route);const e=L("code");e&&this.getUser(e)},setup(e,n){const C=R(H),M=j(),s=z({visible:!1,handleFlag:"",title:"\u9996\u9875",list:[{index:"1",path:"/",name:"\u9996\u9875"},{index:"2",path:"/articles",name:"\u6587\u7AE0"},{index:"3",path:"/archive",name:"\u5F52\u6863"},{index:"4",path:"/project",name:"\u9879\u76EE"},{index:"5",path:"/timeline",name:"\u5386\u7A0B"},{index:"6",path:"/message",name:"\u7559\u8A00"},{index:"7",path:"/about",name:"\u5173\u4E8E"}],activeIndex:"0",enterSlideUp:!1,leaveSlideDown:!1,isShow:!1,isMobile:X()}),$=(l,t)=>{for(let v=0;v<s.list.length;v++){const _=s.list[v];if(_.path===l.path){s.activeIndex=v+1+"",s.title=_.name;break}}},c=(l,t)=>{s.activeIndex=l},h=l=>{s.visible=l},w=l=>{s.visible=l},S=l=>{s.handleFlag=l,s.visible=!0},f=()=>{window.sessionStorage.userInfo="",C.commit("SAVE_USER",{userInfo:{_id:"",name:"",avatar:""}})};return{state:s,handleCancel:w,handleOk:h,handleClick:S,handleLogout:f,handleClickMenu:l=>{s.isShow=!1,l==="/login"&&(s.handleFlag="login",s.visible=!0),l==="/register"&&(s.handleFlag="register",s.visible=!0),l==="/logout"&&f()},handleMenu:()=>{s.isShow=!0,s.enterSlideUp=!0},getUser:async l=>{const t=Y.service({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.7)"}),v=await q.post(J.getUser,{code:l},{withCredentials:!0});t.close();const _={_id:v._id,name:v.name,avatar:v.avatar};C.commit("SAVE_USER",{userInfo:_}),window.sessionStorage.userInfo=JSON.stringify(_),P({message:"\u64CD\u4F5C\u6210\u529F",type:"success"});let b=JSON.parse(window.sessionStorage.preventHistory);b&&M.push({path:b.name,query:b.query})},handleSelect:c,routeChange:$,handleHideMenu:()=>{s.enterSlideUp=!1,s.leaveSlideDown=!0,setTimeout(()=>{s.leaveSlideDown=!1,s.isShow=!1},300)}}}}),k=e=>(G("data-v-e79ab480"),e=e(),K(),e),x={key:0,class:"nav"},ee={class:"nav-content"},ne=k(()=>i("img",{class:"logo",src:U,alt:"BiaoChenXuYing"},null,-1)),te={class:"nav-right"},se={class:"el-dropdown-link"},oe=k(()=>i("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)),ie={key:0,class:"user-img",src:W,alt:"BiaoChenXuYing"},ae=["src"],le=r("\u767B \u51FA"),de={class:"nav-right"},ue=r("\u767B\u5F55"),re=r("\u6CE8\u518C"),ce={key:1,class:"nav"},me={class:"nav-mobile"},ve={class:"nav-mobile-logo"},he=k(()=>i("img",{class:"logo fl",src:U,alt:"BiaoChenXuYing"},null,-1)),pe={class:"title"},_e=k(()=>i("i",{class:"el-icon-menu"},null,-1)),fe=[_e],ge={class:"list"},ke=r("\u9996 \u9875"),Ce=r("\u6587 \u7AE0"),we=r("\u5F52 \u6863"),Se=r("\u9879 \u76EE"),ye=r("\u5386 \u7A0B"),be=r("\u7559 \u8A00"),Ie=r("\u5173 \u4E8E"),Me={key:0},$e={key:1};function Ee(e,n,C,M,s,$){const c=m("router-link"),h=m("el-col"),w=m("el-menuItem"),S=m("el-menu"),f=m("el-dropdown-item"),E=m("el-dropdown-menu"),A=m("el-dropdown"),y=m("el-button"),F=m("el-row"),l=m("RegisterAndLogin");return d(),u("div",null,[e.state.isMobile?(d(),u("div",ce,[i("div",me,[i("div",ve,[a(c,{to:"/"},{default:o(()=>[he]),_:1})]),i("div",pe,g(e.state.title),1),i("div",{class:"menu",onClick:n[2]||(n[2]=(...t)=>e.handleMenu&&e.handleMenu(...t))},fe)]),e.state.isShow?(d(),u("div",{key:0,class:B(["nav-mobile-content",{"enter-slideUp":e.state.enterSlideUp,"leave-slideDown":e.state.leaveSlideDown}])},[i("div",ge,[i("div",{onClick:n[3]||(n[3]=t=>e.handleClickMenu("")),class:"item"},[a(c,{to:"/"},{default:o(()=>[ke]),_:1})]),i("div",{onClick:n[4]||(n[4]=t=>e.handleClickMenu("/articles")),class:"item"},[a(c,{to:"/articles"},{default:o(()=>[Ce]),_:1})]),i("div",{onClick:n[5]||(n[5]=t=>e.handleClickMenu("/archive")),class:"item"},[a(c,{to:"/archive"},{default:o(()=>[we]),_:1})]),i("div",{onClick:n[6]||(n[6]=t=>e.handleClickMenu("/project")),class:"item"},[a(c,{to:"/project"},{default:o(()=>[Se]),_:1})]),i("div",{onClick:n[7]||(n[7]=t=>e.handleClickMenu("/timeline")),class:"item"},[a(c,{to:"/timeline"},{default:o(()=>[ye]),_:1})]),i("div",{onClick:n[8]||(n[8]=t=>e.handleClickMenu("/message")),class:"item"},[a(c,{to:"/message"},{default:o(()=>[be]),_:1})]),i("div",{onClick:n[9]||(n[9]=t=>e.handleClickMenu("/about")),class:"item"},[a(c,{to:"/about"},{default:o(()=>[Ie]),_:1})]),i("div",{onClick:n[10]||(n[10]=t=>e.handleClickMenu("/login")),class:"item"},[e.userInfo._id?(d(),u("span",Me,g(e.userInfo.name),1)):(d(),u("span",$e,"\u767B \u5F55"))]),e.userInfo._id?p("",!0):(d(),u("div",{key:0,onClick:n[11]||(n[11]=t=>e.handleClickMenu("/register")),class:"item"}," \u6CE8 \u518C ")),e.userInfo._id?(d(),u("div",{key:1,onClick:n[12]||(n[12]=t=>e.handleClickMenu("/logout")),class:"item"}," \u767B \u51FA ")):p("",!0)])],2)):p("",!0)])):(d(),u("div",x,[i("div",ee,[a(F,{gutter:20},{default:o(()=>[a(h,{span:3},{default:o(()=>[a(c,{to:"/"},{default:o(()=>[ne]),_:1})]),_:1}),a(h,{span:16},{default:o(()=>[a(S,{router:!0,"default-active":e.state.activeIndex,"active-text-color":"#409eff",class:"el-menu-demo",mode:"horizontal",onSelect:e.handleSelect},{default:o(()=>[(d(!0),u(T,null,Q(e.state.list,t=>(d(),I(w,{route:t.path,index:t.index,key:t.index},{default:o(()=>[r(g(t.name),1)]),_:2},1032,["route","index"]))),128))]),_:1},8,["default-active","onSelect"])]),_:1}),e.userInfo._id?(d(),I(h,{key:0,span:5},{default:o(()=>[i("div",te,[a(A,{onCommand:e.handleLogout},{default:o(()=>[i("span",se,[r(g(e.userInfo.name),1),oe]),e.userInfo.avatar?p("",!0):(d(),u("img",ie)),e.userInfo.avatar?(d(),u("img",{key:1,class:"user-img",src:e.userInfo.avatar,alt:"BiaoChenXuYing"},null,8,ae)):p("",!0),a(E,{slot:"dropdown"},{default:o(()=>[a(f,{command:"logout"},{default:o(()=>[le]),_:1})]),_:1})]),_:1},8,["onCommand"])])]),_:1})):(d(),I(h,{key:1,span:4},{default:o(()=>[i("div",de,[a(y,{size:"small",type:"primary",onClick:n[0]||(n[0]=t=>e.handleClick("login"))},{default:o(()=>[ue]),_:1}),a(y,{size:"small",type:"danger",onClick:n[1]||(n[1]=t=>e.handleClick("register"))},{default:o(()=>[re]),_:1})])]),_:1}))]),_:1})])])),e.state.isShow?(d(),u("div",{key:2,class:B(["mask",{"mask-fade-out":e.state.leaveSlideDown}]),onClick:n[13]||(n[13]=(...t)=>e.handleHideMenu&&e.handleHideMenu(...t))},null,2)):p("",!0),a(l,{visible:e.state.visible,isMobile:e.state.isMobile,handleFlag:e.state.handleFlag,onOk:e.handleOk,onCancel:e.handleCancel},null,8,["visible","isMobile","handleFlag","onOk","onCancel"])])}var Be=N(Z,[["render",Ee],["__scopeId","data-v-e79ab480"]]);export{Be as default};
